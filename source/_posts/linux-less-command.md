---
title: Linux less命令常见用法
categories:
- computer_science
tags:
- linux
- shell
---

# 1. 简介

1. 类似于`more`命令，但除了向前(下)移动也允许向后(上)移动

1. 不会在启动时读入整个输入文件，因此比`vi`启动更快

1. `less`的命令基于`more`和`vi`

1. `less`的命令前可以加一个十进制数`N`，某些命令可以使用它

# 2. 常用命令

1. `h`或`H`: 显示命令帮助信息

1. `q`: 退出less

1. `<SPACE>`: 前进(向下)N行，默认一个window

1. `b`: 后退N行，默认一个window

1. `<ENTER>`或`j`: 前进N行，默认1

1. `k`或`y`: 后退N行，默认1

1. `d`: 前进N行，默认半个window；如果指定了N，它成为后续`d`和`u`命令的默认值

1. `u`: 后退N行，默认半个window；如果指定了N，它成为后续`d`和`u`命令的默认值

1. `R`: 重新加载当前文件；在查看的当前文件被改变时很有用

1. `F`: 前进至文件结尾并保持继续读文件(类似于`tail -f`)，按`^C`停止等待文件生长

1. `g`: 跳转到第N行，默认第1行；如果N很大这个命令可能很慢

1. `G`: 跳转到第N行，默认最后一行；如果N很大这个命令可能很慢

1. `p`或`%`: 跳转到`N%`位置处，N的取值范围为`[0, 100]`，且可以包含小数

1. `/pattern`: 向前(下)查找第`N`个包含`pattern`的行，`N`默认为1
   1. `pattern`是正则表达式
   1. 默认查找是大小写敏感的
   1. 查找从屏幕上显示的第一行开始
   1. 可以在`pattern`的开头包含以下字符来改变查找行为：
      - `!`： 查找不匹配`pattern`的行

1. `?pattern`: 向后(上)查找第`N`个包含`pattern`的行
   1. 查找从屏幕上显示的最后一行开始
   1. 可以在`pattern`的开头包含以下字符来改变查找行为：
      - `!`： 查找不匹配`pattern`的行

1. `n`: 重复先前的查找(查找第`N`个包含先前的`pattern`的行)

1. `N`: 以相反方向重复先前的查找

1. `&pattern`: 只显示匹配`pattern`的行，不匹配的行会被隐藏
   1. 如果`pattern`为空，先前的过滤都会被关闭，即重新显示所有行
   1. 在过滤正在生效时，prompt的开头会显示一个`&`符号
   1. 输入多个`&pattern`命令时，只有匹配所有`pattern`的行才会显示

1. `-`: 紧跟一个命令行选项字母，这会打印该命令行选项的描述并使用该命令行选项的设置

1. `-+`: 紧跟一个命令行选项字母，这会重置该选项对应的配置为默认配置

1. `--`: 类似于`-`命令，但是接受一个长选项名

# 3. 常用命令行选项

大部分命令行选项也可以在less运行时通过`-`命令使用。

1. `-M`和`-m`: `-m`让less使用详细prompt(提示当前页面在文件的百分比位置), `-M`使用的prompt更加详细。

1. `-N`和`-n`: `-N`在每一行开头显示行号，`-n`取消显示行号。

1. `-r`: 使less解析显示控制字符，用于显示文本颜色、中文字符等。默认情况下less只以`^`记号显示控制字符。**不推荐使用`-r`**，因为这些控制字符的干扰可能使less出现各种显示问题。

1. `-i`: 使search忽略大小写。但如果`pattern`里包含任意大写字母，search依然区分大小写。

1. `-I`: 使search忽略大小写(即使`pattern`里包含大写字母)。